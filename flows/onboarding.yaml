flow_id: simple_handoff
start: hours_gate

nodes:
  hours_gate:
    type: action
    action: business_hours_gate
    timezone: "America/Sao_Paulo"
    in_hours_next: welcome
    off_hours_next: off_hours_msg

  welcome:
    type: message
    text: |
      OlÃ¡ {{contact.nome or ""}} ğŸ‘‹ Sou o assistente virtual da ConnectZap e vou te ajudar no atendimento.
      Antes de transferir, pode me mandar um breve resumo do que vocÃª precisa?
    next: ask_summary

  ask_summary:
    type: question
    # sem 'text' para nÃ£o enviar segunda mensagem
    save_as: summary
    next: delay_then_handoff

  delay_then_handoff:
    type: action
    action: delay
    seconds: 10
    next: handoff

  handoff:
    type: handoff
    text: "Ok, muito obrigado! Vou te conectar com um atendente humano. Aguarde um instante."
    next: end

  off_hours_msg:
    type: message
    text: |
      Ops! Nosso horÃ¡rio de atendimento Ã© de segunda a sexta, das 08h Ã s 20h,
      e aos sÃ¡bados, das 08h Ã s 14h.
      Se puder, mande sua mensagem nesse perÃ­odo para um retorno mais rÃ¡pido.
      Se preferir, pode deixar um resumo agora e responderemos no prÃ³ximo horÃ¡rio Ãºtil. ğŸ™‚
    next: end

  end:
    type: end
